/*! For license information please see tool.js.LICENSE.txt */
(()=>{"use strict";var e,t={455:(e,t,n)=>{const i=Vue;var r={class:"spin-wheel-settings"},a={class:"left-panel"},o={class:"wheel-container",ref:"wheelContainer"},s=["disabled"],l=["src"],u={class:"right-panel prize-config"},c=["onClick"],h=["onUpdate:modelValue","placeholder"],d=["onUpdate:modelValue"],f=["onChange"],m={key:0,class:"icon-preview"},g=["src"],p=["onUpdate:modelValue"],v=["onUpdate:modelValue"],b=["onClick"],_={class:"config-section"},y={class:"sticky-buttons"},x={key:0,class:"success-message"};function w(e=0){return e*Math.PI/180}function L(e,t,n,i){i.save(),i.font=`1px ${t}`;const r=i.measureText(e).width;return i.restore(),n/r}function C(e={x:0,y:0},t={},n=1){const i=t.getBoundingClientRect();return{x:(e.x-i.left)*n,y:(e.y-i.top)*n}}function S(e=0,t=0,n=1){let i=(e%360+t)%360;return i=function(e=0){return Number(e.toFixed(9))}(i),i=(1===n?360-i:360+i)%360,i*=n,e+i}function E(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function R(e){return"number"==typeof e&&!Number.isNaN(e)}function k({val:e,isValid:t,errorMessage:n,defaultValue:i,action:r=null}){if(t)return r?r():e;if(void 0===e)return i;throw new Error(n)}function I(e){return Math.sin(e*Math.PI/2)}const M=-90,V=Object.freeze({left:"left",right:"right",center:"center"}),T=Object.freeze({wheel:{borderColor:"#000",borderWidth:1,debug:!1,image:null,isInteractive:!0,itemBackgroundColors:["#fff"],itemLabelAlign:V.right,itemLabelBaselineOffset:0,itemLabelColors:["#000"],itemLabelFont:"sans-serif",itemLabelFontSizeMax:500,itemLabelRadius:.85,itemLabelRadiusMax:.2,itemLabelRotation:0,itemLabelStrokeColor:"#fff",itemLabelStrokeWidth:0,items:[],lineColor:"#000",lineWidth:1,pixelRatio:0,radius:.95,rotation:0,rotationResistance:-35,rotationSpeedMax:300,offset:{x:0,y:0},onCurrentIndexChange:null,onRest:null,onSpin:null,overlayImage:null,pointerAngle:0},item:{backgroundColor:null,image:null,imageOpacity:1,imageRadius:.5,imageRotation:0,imageScale:1,label:"",labelColor:null,value:null,weight:1}}),F=Object.freeze({pointerLineColor:"#ff00ff",labelBoundingBoxColor:"#ff00ff",labelRadiusColor:"#00ff00",dragPointHue:300});function A(e={}){!function(e={}){const t=e.canvas;e._handler_onPointerMoveRefreshCursor=(t={})=>{const n={x:t.clientX,y:t.clientY};e._isCursorOverWheel=e.wheelHitTest(n),e.refreshCursor()},e._handler_onMouseMoveRefreshCursor=(t={})=>{const n={x:t.clientX,y:t.clientY};e._isCursorOverWheel=e.wheelHitTest(n),e.refreshCursor()},e._handler_onPointerDown=(n={})=>{const i={x:n.clientX,y:n.clientY};function r(t={}){t.preventDefault(),e.dragMove({x:t.clientX,y:t.clientY})}function a(n={}){n.preventDefault(),t.releasePointerCapture(n.pointerId),t.removeEventListener("pointermove",r),t.removeEventListener("pointerup",a),t.removeEventListener("pointercancel",a),t.removeEventListener("pointerout",a),e.dragEnd()}e.isInteractive&&e.wheelHitTest(i)&&(n.preventDefault(),e.dragStart(i),t.setPointerCapture(n.pointerId),t.addEventListener("pointermove",r),t.addEventListener("pointerup",a),t.addEventListener("pointercancel",a),t.addEventListener("pointerout",a))},e._handler_onMouseDown=(t={})=>{const n={x:t.clientX,y:t.clientY};function i(t={}){t.preventDefault(),e.dragMove({x:t.clientX,y:t.clientY})}function r(t={}){t.preventDefault(),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r),e.dragEnd()}e.isInteractive&&e.wheelHitTest(n)&&(e.dragStart(n),document.addEventListener("mousemove",i),document.addEventListener("mouseup",r))},e._handler_onTouchStart=(n={})=>{const i={x:n.targetTouches[0].clientX,y:n.targetTouches[0].clientY};function r(t={}){t.preventDefault(),e.dragMove({x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY})}function a(n={}){n.preventDefault(),t.removeEventListener("touchmove",r),t.removeEventListener("touchend",a),t.removeEventListener("touchcancel",a),e.dragEnd()}e.isInteractive&&e.wheelHitTest(i)&&(n.preventDefault(),e.dragStart(i),t.addEventListener("touchmove",r),t.addEventListener("touchend",a),t.addEventListener("touchcancel",a))},"PointerEvent"in window?(t.addEventListener("pointerdown",e._handler_onPointerDown),t.addEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.addEventListener("touchstart",e._handler_onTouchStart),t.addEventListener("mousedown",e._handler_onMouseDown),t.addEventListener("mousemove",e._handler_onMouseMoveRefreshCursor))}(e),e._handler_onResize=function(e={},t={}){if(window.ResizeObserver){const n=new ResizeObserver((()=>{t({redraw:!0})}));return n.observe(e),{stop:()=>{n.unobserve(e),n.disconnect()}}}return window.addEventListener("resize",t),{stop:()=>{window.removeEventListener("resize",t)}}}(e._canvasContainer,(({redraw:t=!0})=>{e.resize(),t&&e.draw(performance.now())}));const t=()=>{e._mediaQueryList=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),e._mediaQueryList.addEventListener("change",e._handler_onDevicePixelRatioChange,{once:!0})};e._handler_onDevicePixelRatioChange=()=>{e.resize(),t()},t()}class W{constructor(e,t={}){if(!E(e))throw new Error("wheel must be an instance of Wheel");if(!E(t)&&null!==t)throw new Error("props must be an Object or null");this._wheel=e;for(const e of Object.keys(T.item))this["_"+e]=T.item[e];t?this.init(t):this.init(T.item)}init(e={}){this.backgroundColor=e.backgroundColor,this.image=e.image,this.imageOpacity=e.imageOpacity,this.imageRadius=e.imageRadius,this.imageRotation=e.imageRotation,this.imageScale=e.imageScale,this.label=e.label,this.labelColor=e.labelColor,this.value=e.value,this.weight=e.weight}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this._backgroundColor="string"==typeof e?e:T.item.backgroundColor,this._wheel.refresh()}get image(){return this._image}set image(e){e instanceof HTMLImageElement?this._image=e:this._image=T.item.image,this._wheel.refresh()}get imageOpacity(){return this._imageOpacity}set imageOpacity(e){this._imageOpacity="number"==typeof e?e:T.item.imageOpacity,this._wheel.refresh()}get imageRadius(){return this._imageRadius}set imageRadius(e){this._imageRadius="number"==typeof e?e:T.item.imageRadius,this._wheel.refresh()}get imageRotation(){return this._imageRotation}set imageRotation(e){this._imageRotation="number"==typeof e?e:T.item.imageRotation,this._wheel.refresh()}get imageScale(){return this._imageScale}set imageScale(e){this._imageScale="number"==typeof e?e:T.item.imageScale,this._wheel.refresh()}get label(){return this._label}set label(e){this._label="string"==typeof e?e:T.item.label,this._wheel.refresh()}get labelColor(){return this._labelColor}set labelColor(e){this._labelColor="string"==typeof e?e:T.item.labelColor,this._wheel.refresh()}get value(){return this._value}set value(e){this._value=void 0!==e?e:T.item.value}get weight(){return this._weight}set weight(e){this._weight="number"==typeof e?e:T.item.weight}getIndex(){const e=this._wheel.items.findIndex((e=>e===this));if(-1===e)throw new Error("Item not found in parent Wheel");return e}getCenterAngle(){const e=this._wheel.getItemAngles()[this.getIndex()];return e.start+(e.end-e.start)/2}getStartAngle(){return this._wheel.getItemAngles()[this.getIndex()].start}getEndAngle(){return this._wheel.getItemAngles()[this.getIndex()].end}getRandomAngle(){return function(e=0,t=0,n=14){return parseFloat((Math.random()*(t-e)+e).toFixed(n))}(this.getStartAngle(),this.getEndAngle())}}class O{constructor(e,t={}){if(!(e instanceof Element))throw new Error("container must be an instance of Element");if(!E(t)&&null!==t)throw new Error("props must be an Object or null");this._frameRequestId=null,this._rotationSpeed=0,this._rotationDirection=1,this._spinToTimeEnd=null,this._lastSpinFrameTime=null,this._isCursorOverWheel=!1,this.add(e);for(const e of Object.keys(T.wheel))this["_"+e]=T.wheel[e];t?this.init(t):this.init(T.wheel)}init(e={}){this._isInitialising=!0,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth,this.debug=e.debug,this.image=e.image,this.isInteractive=e.isInteractive,this.itemBackgroundColors=e.itemBackgroundColors,this.itemLabelAlign=e.itemLabelAlign,this.itemLabelBaselineOffset=e.itemLabelBaselineOffset,this.itemLabelColors=e.itemLabelColors,this.itemLabelFont=e.itemLabelFont,this.itemLabelFontSizeMax=e.itemLabelFontSizeMax,this.itemLabelRadius=e.itemLabelRadius,this.itemLabelRadiusMax=e.itemLabelRadiusMax,this.itemLabelRotation=e.itemLabelRotation,this.itemLabelStrokeColor=e.itemLabelStrokeColor,this.itemLabelStrokeWidth=e.itemLabelStrokeWidth,this.items=e.items,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.pixelRatio=e.pixelRatio,this.rotationSpeedMax=e.rotationSpeedMax,this.radius=e.radius,this.rotation=e.rotation,this.rotationResistance=e.rotationResistance,this.offset=e.offset,this.onCurrentIndexChange=e.onCurrentIndexChange,this.onRest=e.onRest,this.onSpin=e.onSpin,this.overlayImage=e.overlayImage,this.pointerAngle=e.pointerAngle}add(e){this._canvasContainer=e,this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this._context=this.canvas.getContext("2d"),this._canvasContainer.append(this.canvas),A(this),!1===this._isInitialising&&this.resize()}remove(){null!==this.canvas&&(null!==this._frameRequestId&&window.cancelAnimationFrame(this._frameRequestId),function(e={}){const t=e.canvas;"PointerEvent"in window?(t.removeEventListener("pointerdown",e._handler_onPointerDown),t.removeEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.removeEventListener("touchstart",e._handler_onTouchStart),t.removeEventListener("mousedown",e._handler_onMouseDown),t.removeEventListener("mousemove",e._handler_onMouseMoveRefreshCursor)),e._handler_onResize.stop(),e._mediaQueryList.removeEventListener("change",e._handler_onDevicePixelRatioChange)}(this),this._canvasContainer.removeChild(this.canvas),this._canvasContainer=null,this.canvas=null,this._context=null)}resize(){if(null===this.canvas)return;this.canvas.style.width=this._canvasContainer.clientWidth+"px",this.canvas.style.height=this._canvasContainer.clientHeight+"px";const[e,t]=[this._canvasContainer.clientWidth*this.getActualPixelRatio(),this._canvasContainer.clientHeight*this.getActualPixelRatio()];this.canvas.width=e,this.canvas.height=t;const n=Math.min(e,t),i=n-n*this._offset.x,r=n-n*this._offset.y,a=Math.min(e/i,t/r);this._size=Math.max(i*a,r*a),this._center={x:e/2+e*this._offset.x,y:t/2+t*this._offset.y},this._actualRadius=this._size/2*this.radius,this._itemLabelFontSize=this.itemLabelFontSizeMax*(this._size/500),this._labelMaxWidth=this._actualRadius*(this.itemLabelRadius-this.itemLabelRadiusMax),"center"===this.itemLabelAlign&&(this._labelMaxWidth*=2);for(const e of this._items)this._itemLabelFontSize=Math.min(this._itemLabelFontSize,L(e.label,this.itemLabelFont,this._labelMaxWidth,this._context));this.refresh()}draw(e=0){if(this._frameRequestId=null,null===this._context||null===this.canvas)return;const t=this._context;t.clearRect(0,0,this.canvas.width,this.canvas.height),this.animateRotation(e);const n=this.getItemAngles(this._rotation),i=this.getScaledNumber(this._borderWidth);t.textBaseline="middle",t.textAlign=this.itemLabelAlign,t.font=this._itemLabelFontSize+"px "+this.itemLabelFont;for(const[e,t]of n.entries()){const n=this._items[e],r=new Path2D;r.moveTo(this._center.x,this._center.y),r.arc(this._center.x,this._center.y,this._actualRadius-i/2,w(t.start+M),w(t.end+M)),n.path=r}this.drawItemBackgrounds(t,n),this.drawItemImages(t,n),this.drawItemLines(t,n),this.drawItemLabels(t,n),this.drawBorder(t),this.drawImage(t,this._image,!1),this.drawImage(t,this._overlayImage,!0),this.drawDebugPointerLine(t),this._isInitialising=!1}drawItemBackgrounds(e,t=[]){for(const[n,i]of t.entries()){const t=this._items[n];e.fillStyle=t.backgroundColor??this._itemBackgroundColors[n%this._itemBackgroundColors.length],e.fill(t.path)}}drawItemImages(e,t=[]){for(const[n,i]of t.entries()){const t=this._items[n];if(null===t.image)continue;e.save(),e.clip(t.path);const r=i.start+(i.end-i.start)/2;e.translate(this._center.x+Math.cos(w(r+M))*(this._actualRadius*t.imageRadius),this._center.y+Math.sin(w(r+M))*(this._actualRadius*t.imageRadius)),e.rotate(w(r+t.imageRotation)),e.globalAlpha=t.imageOpacity;const a=this._size/500*t.image.width*t.imageScale,o=this._size/500*t.image.height*t.imageScale,s=-a/2,l=-o/2;e.drawImage(t.image,s,l,a,o),e.restore()}}drawImage(e,t,n=!1){if(null===t)return;e.translate(this._center.x,this._center.y),n||e.rotate(w(this._rotation));const i=n?this._size:this._size*this.radius,r=-i/2;e.drawImage(t,r,r,i,i),e.resetTransform()}drawDebugPointerLine(e){this.debug&&(e.translate(this._center.x,this._center.y),e.rotate(w(this._pointerAngle+M)),e.beginPath(),e.moveTo(0,0),e.lineTo(2*this._actualRadius,0),e.strokeStyle=F.pointerLineColor,e.lineWidth=this.getScaledNumber(2),e.stroke(),e.resetTransform())}drawBorder(e){if(this._borderWidth<=0)return;const t=this.getScaledNumber(this._borderWidth),n=this._borderColor||"transparent";if(e.beginPath(),e.strokeStyle=n,e.lineWidth=t,e.arc(this._center.x,this._center.y,this._actualRadius-t/2,0,2*Math.PI),e.stroke(),this.debug){const t=this.getScaledNumber(1);e.beginPath(),e.strokeStyle=e.strokeStyle=F.labelRadiusColor,e.lineWidth=t,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadius,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle=e.strokeStyle=F.labelRadiusColor,e.lineWidth=t,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadiusMax,0,2*Math.PI),e.stroke()}}drawItemLines(e,t=[]){if(this._lineWidth<=0)return;const n=this.getScaledNumber(this._lineWidth),i=this.getScaledNumber(this._borderWidth);e.translate(this._center.x,this._center.y);for(const r of t)e.rotate(w(r.start+M)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius-i,0),e.strokeStyle=this.lineColor,e.lineWidth=n,e.stroke(),e.rotate(-w(r.start+M));e.resetTransform()}drawItemLabels(e,t=[]){const n=this._itemLabelFontSize*-this.itemLabelBaselineOffset,i=this.getScaledNumber(1),r=this.getScaledNumber(2*this._itemLabelStrokeWidth);for(const[a,o]of t.entries()){const t=this._items[a],s=t.labelColor||this._itemLabelColors[a%this._itemLabelColors.length]||"transparent";if(""===t.label.trim()||"transparent"===s)continue;e.save(),e.clip(t.path);const l=o.start+(o.end-o.start)/2;if(e.translate(this._center.x+Math.cos(w(l+M))*(this._actualRadius*this.itemLabelRadius),this._center.y+Math.sin(w(l+M))*(this._actualRadius*this.itemLabelRadius)),e.rotate(w(l+M)),e.rotate(w(this.itemLabelRotation)),this.debug){e.save();let t=0;"left"===this.itemLabelAlign?t=this._labelMaxWidth:"center"===this.itemLabelAlign&&(t=this._labelMaxWidth/2),e.beginPath(),e.moveTo(t,0),e.lineTo(-this._labelMaxWidth+t,0),e.strokeStyle=F.labelBoundingBoxColor,e.lineWidth=i,e.stroke(),e.strokeRect(t,-this._itemLabelFontSize/2,-this._labelMaxWidth,this._itemLabelFontSize),e.restore()}if(this._itemLabelStrokeWidth>0&&(e.lineWidth=r,e.strokeStyle=this._itemLabelStrokeColor,e.lineJoin="round",e.strokeText(t.label,0,n)),e.fillStyle=s,e.fillText(t.label,0,n),this.debug){const t=this.getScaledNumber(2);e.beginPath(),e.arc(0,0,t,0,2*Math.PI),e.fillStyle=F.labelRadiusColor,e.fill()}e.restore()}}drawDebugDragPoints(e){if(!this.debug||!this._dragEvents?.length)return;const t=[...this._dragEvents].reverse(),n=this.getScaledNumber(.5),i=this.getScaledNumber(4);for(const[r,a]of t.entries()){const t=r/this._dragEvents.length*100;e.beginPath(),e.arc(a.x,a.y,i,0,2*Math.PI),e.fillStyle=`hsl(${F.dragPointHue},100%,${t}%)`,e.strokeStyle="#000",e.lineWidth=n,e.fill(),e.stroke()}}animateRotation(e=0){if(null!==this._spinToTimeEnd){if(e>=this._spinToTimeEnd)return this.rotation=this._spinToEndRotation,this._spinToTimeEnd=null,void this.raiseEvent_onRest();const t=this._spinToTimeEnd-this._spinToTimeStart;let n=(e-this._spinToTimeStart)/t;n=n<0?0:n;const i=this._spinToEndRotation-this._spinToStartRotation;return this.rotation=this._spinToStartRotation+i*this._spinToEasingFunction(n),void this.refresh()}if(null!==this._lastSpinFrameTime){const t=e-this._lastSpinFrameTime;return t>0&&(this.rotation+=t/1e3*this._rotationSpeed%360,this._rotationSpeed=this.getRotationSpeedPlusDrag(t),0===this._rotationSpeed?(this.raiseEvent_onRest(),this._lastSpinFrameTime=null):this._lastSpinFrameTime=e),void this.refresh()}}getRotationSpeedPlusDrag(e=0){const t=this._rotationSpeed+this.rotationResistance*(e/1e3)*this._rotationDirection;return 1===this._rotationDirection&&t<0||-1===this._rotationDirection&&t>=0?0:t}spin(e=0){if(!R(e))throw new Error("rotationSpeed must be a number");this._dragEvents=[],this.beginSpin(e,"spin")}spinTo(e=0,t=0,n=null){if(!R(e))throw new Error("Error: rotation must be a number");if(!R(t))throw new Error("Error: duration must be a number");this.stop(),this._dragEvents=[],this.animate(e,t,n),this.raiseEvent_onSpin({method:"spinto",targetRotation:e,duration:t})}spinToItem(e=0,t=0,n=!0,i=1,r=1,a=null){this.stop(),this._dragEvents=[];const o=n?this.items[e].getCenterAngle():this.items[e].getRandomAngle();let s=S(this.rotation,o-this._pointerAngle,r);s+=360*i*r,this.animate(s,t,a),this.raiseEvent_onSpin({method:"spintoitem",targetItemIndex:e,targetRotation:s,duration:t})}animate(e,t,n){this._spinToStartRotation=this.rotation,this._spinToEndRotation=e,this._spinToTimeStart=performance.now(),this._spinToTimeEnd=this._spinToTimeStart+t,this._spinToEasingFunction=n||I,this.refresh()}stop(){this._spinToTimeEnd=null,this._rotationSpeed=0,this._lastSpinFrameTime=null}getScaledNumber(e){return e/500*this._size}getActualPixelRatio(){return 0!==this._pixelRatio?this._pixelRatio:window.devicePixelRatio}wheelHitTest(e={x:0,y:0}){if(null===this.canvas)return!1;return function(e={x:0,y:0},t,n,i){return(e.x-t)**2+(e.y-n)**2<=i**2}(C(e,this.canvas,this.getActualPixelRatio()),this._center.x,this._center.y,this._actualRadius)}refreshCursor(){if(null!==this.canvas){if(this.isInteractive){if(this.isDragging)return void(this.canvas.style.cursor="grabbing");if(this._isCursorOverWheel)return void(this.canvas.style.cursor="grab")}this.canvas.style.cursor=""}}getAngleFromCenter(e={x:0,y:0}){return(function(e,t,n,i){const r=e-n,a=t-i;let o=Math.atan2(-a,-r);return o*=180/Math.PI,o<0&&(o+=360),o}(this._center.x,this._center.y,e.x,e.y)+90)%360}getCurrentIndex(){return this._currentIndex}refreshCurrentIndex(e=[]){0===this._items.length&&(this._currentIndex=-1);for(const[r,a]of e.entries())if(t=this._pointerAngle,n=a.start%360,i=a.end%360,n<i?n<=t&&t<i:n<=t||t<i){if(this._currentIndex===r)break;this._currentIndex=r,this._isInitialising||this.raiseEvent_onCurrentIndexChange();break}var t,n,i}getItemAngles(e=0){let t=0;for(const e of this.items)t+=e.weight;const n=360/t;let i,r=e;const a=[];for(const e of this._items)i=e.weight*n,a.push({start:r,end:r+i}),r+=i;return this._items.length>1&&(a[a.length-1].end=a[0].start+360),a}refresh(){null===this._frameRequestId&&(this._frameRequestId=window.requestAnimationFrame((e=>this.draw(e))))}limitSpeed(e=0,t=0){const n=Math.min(e,t);return Math.max(n,-t)}beginSpin(e=0,t=""){this.stop(),this._rotationSpeed=this.limitSpeed(e,this._rotationSpeedMax),this._lastSpinFrameTime=performance.now(),this._rotationDirection=this._rotationSpeed>=0?1:-1,0!==this._rotationSpeed&&this.raiseEvent_onSpin({method:t,rotationSpeed:this._rotationSpeed,rotationResistance:this._rotationResistance}),this.refresh()}refreshAriaLabel(){if(null===this.canvas)return;this.canvas.setAttribute("role","img");const e=this.items.length>=2?` The wheel has ${this.items.length} slices.`:"";this.canvas.setAttribute("aria-label","An image of a spinning prize wheel."+e)}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=k({val:e,isValid:"string"==typeof e,errorMessage:"Wheel.borderColor must be a string",defaultValue:T.wheel.borderColor}),this.refresh()}get borderWidth(){return this._borderWidth}set borderWidth(e){this._borderWidth=k({val:e,isValid:R(e),errorMessage:"Wheel.borderWidth must be a number",defaultValue:T.wheel.borderWidth}),this.refresh()}get debug(){return this._debug}set debug(e){this._debug=k({val:e,isValid:"boolean"==typeof e,errorMessage:"Wheel.debug must be a boolean",defaultValue:T.wheel.debug}),this.refresh()}get image(){return this._image}set image(e){this._image=k({val:e,isValid:e instanceof HTMLImageElement||null===e,errorMessage:"Wheel.image must be a HTMLImageElement or null",defaultValue:T.wheel.image}),this.refresh()}get isInteractive(){return this._isInteractive}set isInteractive(e){this._isInteractive=k({val:e,isValid:"boolean"==typeof e,errorMessage:"Wheel.isInteractive must be a boolean",defaultValue:T.wheel.isInteractive}),this.refreshCursor()}get itemBackgroundColors(){return this._itemBackgroundColors}set itemBackgroundColors(e){this._itemBackgroundColors=k({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemBackgroundColors must be an array",defaultValue:T.wheel.itemBackgroundColors}),this.refresh()}get itemLabelAlign(){return this._itemLabelAlign}set itemLabelAlign(e){this._itemLabelAlign=k({val:e,isValid:"string"==typeof e&&(e===V.left||e===V.right||e===V.center),errorMessage:"Wheel.itemLabelAlign must be one of Constants.AlignText",defaultValue:T.wheel.itemLabelAlign}),this.resize()}get itemLabelBaselineOffset(){return this._itemLabelBaselineOffset}set itemLabelBaselineOffset(e){this._itemLabelBaselineOffset=k({val:e,isValid:R(e),errorMessage:"Wheel.itemLabelBaselineOffset must be a number",defaultValue:T.wheel.itemLabelBaselineOffset}),this.resize()}get itemLabelColors(){return this._itemLabelColors}set itemLabelColors(e){this._itemLabelColors=k({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemLabelColors must be an array",defaultValue:T.wheel.itemLabelColors}),this.refresh()}get itemLabelFont(){return this._itemLabelFont}set itemLabelFont(e){this._itemLabelFont=k({val:e,isValid:"string"==typeof e,errorMessage:"Wheel.itemLabelFont must be a string",defaultValue:T.wheel.itemLabelFont}),this.resize()}get itemLabelFontSizeMax(){return this._itemLabelFontSizeMax}set itemLabelFontSizeMax(e){this._itemLabelFontSizeMax=k({val:e,isValid:R(e),errorMessage:"Wheel.itemLabelFontSizeMax must be a number",defaultValue:T.wheel.itemLabelFontSizeMax}),this.resize()}get itemLabelRadius(){return this._itemLabelRadius}set itemLabelRadius(e){this._itemLabelRadius=k({val:e,isValid:R(e),errorMessage:"Wheel.itemLabelRadius must be a number",defaultValue:T.wheel.itemLabelRadius}),this.resize()}get itemLabelRadiusMax(){return this._itemLabelRadiusMax}set itemLabelRadiusMax(e){this._itemLabelRadiusMax=k({val:e,isValid:R(e),errorMessage:"Wheel.itemLabelRadiusMax must be a number",defaultValue:T.wheel.itemLabelRadiusMax}),this.resize()}get itemLabelRotation(){return this._itemLabelRotation}set itemLabelRotation(e){this._itemLabelRotation=k({val:e,isValid:R(e),errorMessage:"Wheel.itemLabelRotation must be a number",defaultValue:T.wheel.itemLabelRotation}),this.refresh()}get itemLabelStrokeColor(){return this._itemLabelStrokeColor}set itemLabelStrokeColor(e){this._itemLabelStrokeColor=k({val:e,isValid:"string"==typeof e,errorMessage:"Wheel.itemLabelStrokeColor must be a string",defaultValue:T.wheel.itemLabelStrokeColor}),this.refresh()}get itemLabelStrokeWidth(){return this._itemLabelStrokeWidth}set itemLabelStrokeWidth(e){this._itemLabelStrokeWidth=k({val:e,isValid:R(e),errorMessage:"Wheel.itemLabelStrokeWidth must be a number",defaultValue:T.wheel.itemLabelStrokeWidth}),this.refresh()}get items(){return this._items}set items(e){this._items=k({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.items must be an array of Items",defaultValue:T.wheel.items,action:()=>{const t=[];for(const n of e)t.push(new W(this,n));return t}}),this.refreshAriaLabel(),this.refreshCurrentIndex(this.getItemAngles(this._rotation)),this.resize()}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=k({val:e,isValid:"string"==typeof e,errorMessage:"Wheel.lineColor must be a string",defaultValue:T.wheel.lineColor}),this.refresh()}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=k({val:e,isValid:R(e),errorMessage:"Wheel.lineWidth must be a number",defaultValue:T.wheel.lineWidth}),this.refresh()}get offset(){return this._offset}set offset(e){this._offset=k({val:e,isValid:E(e),errorMessage:"Wheel.offset must be an object",defaultValue:T.wheel.offset}),this.resize()}get onCurrentIndexChange(){return this._onCurrentIndexChange}set onCurrentIndexChange(e){this._onCurrentIndexChange=k({val:e,isValid:"function"==typeof e||null===e,errorMessage:"Wheel.onCurrentIndexChange must be a function or null",defaultValue:T.wheel.onCurrentIndexChange})}get onRest(){return this._onRest}set onRest(e){this._onRest=k({val:e,isValid:"function"==typeof e||null===e,errorMessage:"Wheel.onRest must be a function or null",defaultValue:T.wheel.onRest})}get onSpin(){return this._onSpin}set onSpin(e){this._onSpin=k({val:e,isValid:"function"==typeof e||null===e,errorMessage:"Wheel.onSpin must be a function or null",defaultValue:T.wheel.onSpin})}get overlayImage(){return this._overlayImage}set overlayImage(e){this._overlayImage=k({val:e,isValid:e instanceof HTMLImageElement||null===e,errorMessage:"Wheel.overlayImage must be a HTMLImageElement or null",defaultValue:T.wheel.overlayImage}),this.refresh()}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){this._pixelRatio=k({val:e,isValid:R(e),errorMessage:"Wheel.pixelRatio must be a number",defaultValue:T.wheel.pixelRatio}),this._dragEvents=[],this.resize()}get pointerAngle(){return this._pointerAngle}set pointerAngle(e){this._pointerAngle=k({val:e,isValid:R(e)&&e>=0,errorMessage:"Wheel.pointerAngle must be a number between 0 and 360",defaultValue:T.wheel.pointerAngle,action:()=>e%360}),this.debug&&this.refresh()}get radius(){return this._radius}set radius(e){this._radius=k({val:e,isValid:R(e),errorMessage:"Wheel.radius must be a number",defaultValue:T.wheel.radius}),this.resize()}get rotation(){return this._rotation}set rotation(e){this._rotation=k({val:e,isValid:R(e),errorMessage:"Wheel.rotation must be a number",defaultValue:T.wheel.rotation}),this.refreshCurrentIndex(this.getItemAngles(this._rotation)),this.refresh()}get rotationResistance(){return this._rotationResistance}set rotationResistance(e){this._rotationResistance=k({val:e,isValid:R(e),errorMessage:"Wheel.rotationResistance must be a number",defaultValue:T.wheel.rotationResistance})}get rotationSpeed(){return this._rotationSpeed}get rotationSpeedMax(){return this._rotationSpeedMax}set rotationSpeedMax(e){this._rotationSpeedMax=k({val:e,isValid:R(e)&&e>=0,errorMessage:"Wheel.rotationSpeedMax must be a number >= 0",defaultValue:T.wheel.rotationSpeedMax})}dragStart(e={x:0,y:0}){if(null===this.canvas)return;const t=C(e,this.canvas,this.getActualPixelRatio());this.isDragging=!0,this.stop(),this._dragEvents=[{distance:0,x:t.x,y:t.y,now:performance.now()}],this.refreshCursor()}dragMove(e={x:0,y:0}){if(null===this.canvas)return;const t=C(e,this.canvas,this.getActualPixelRatio()),n=this.getAngleFromCenter(t),i=this._dragEvents[0],r=function(e=0,t=0){const n=function(e=0,t=0){const n=e+t;let i;return i=n>0?n%360:360+n%360,360===i&&(i=0),i}(e,180-t);return 180-n}(this.getAngleFromCenter(i),n);this._dragEvents.unshift({distance:r,x:t.x,y:t.y,now:performance.now()}),this.debug&&this._dragEvents.length>=40&&this._dragEvents.pop(),this.rotation+=r}dragEnd(){this.isDragging=!1;let e=0;const t=performance.now();for(const[n,i]of this._dragEvents.entries()){if(this.isDragEventTooOld(t,i)){this._dragEvents.length=n,this.debug&&this.refresh();break}e+=i.distance}this.refreshCursor(),0!==e&&this.beginSpin(4*e,"interact")}isDragEventTooOld(e=0,t={}){return e-t.now>250}raiseEvent_onCurrentIndexChange(e={}){this.onCurrentIndexChange?.({type:"currentIndexChange",currentIndex:this._currentIndex,...e})}raiseEvent_onRest(e={}){this.onRest?.({type:"rest",currentIndex:this._currentIndex,rotation:this._rotation,...e})}raiseEvent_onSpin(e={}){this.onSpin?.({type:"spin",...e})}}function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function z(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function j(){j=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),s=new M(i||[]);return r(o,"_invoke",{value:E(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",m="executing",g="completed",p={};function v(){}function b(){}function _(){}var y={};u(y,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(V([])));w&&w!==n&&i.call(w,o)&&(y=w);var L=_.prototype=v.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,a,o,s){var l=h(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==N(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function E(t,n,i){var r=d;return function(a,o){if(r===m)throw Error("Generator is already running");if(r===g){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=R(s,i);if(l){if(l===p)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===d)throw r=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=m;var u=h(t,n,i);if("normal"===u.type){if(r=i.done?g:f,u.arg===p)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=g,i.method="throw",i.arg=u.arg)}}}function R(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),p;var a=h(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function V(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(N(t)+" is not iterable")}return b.prototype=_,r(L,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},C(S.prototype),u(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new S(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(L),u(L,l,"Generator"),u(L,o,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=V,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:V(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),p}},t}function q(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){q(a,i,r,o,s,"next",e)}function s(e){q(a,i,r,o,s,"throw",e)}o(void 0)}))}}const G={setup:function(){var e=(0,i.ref)(null),t=(0,i.ref)(null),n=(0,i.ref)([]),r=(0,i.ref)(""),a=(0,i.ref)(!1),o=(0,i.ref)(null),s=(0,i.ref)(!0),l=(0,i.ref)({}),u=new Image;u.src="/images/bg-kim-1x.png?6b8bdebce788128eada1e5a781d3d4cf";var c=(0,i.ref)({spinDuration:4e3,numberOfRevolutions:20,easingFunction:"cubicOut",rotationResistance:-35});(0,i.onMounted)(H(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return e.next=4,p();case 4:return e.next=6,h();case 6:case"end":return e.stop()}}),e)}))));var h=function(){var e=H(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nova.request().get("/nova-vendor/spin-wheel-tool/check-spin");case 3:return t=e.sent,s.value=t.data.can_spin,s.value||(r.value="Bạn đã hết lượt quay."),e.abrupt("return",t.data.can_spin);case 9:e.prev=9,e.t0=e.catch(0),console.error("Không thể kiểm tra quyền quay:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=H(j().mark((function e(){var t,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nova.request().get("/nova-vendor/spin-wheel-tool/config");case 3:t=e.sent,i=t.data.prizes||[],n.value=i.map((function(e){return{id:e.id,label:e.name,icon:e.icon||null,display_option:e.display_option||"both",weight:e.weight||1,backgroundColor:e.backgroundColor||"#FFFFFF"}})),c.value={spinDuration:Number(t.data.config.spinDuration||4e3),numberOfRevolutions:Number(t.data.config.numberOfRevolutions||20),easingFunction:t.data.config.easingFunction||"cubicOut",rotationResistance:t.data.config.rotationResistance||-35},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Không thể tải cấu hình:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=H(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new FormData,n.value.forEach((function(e,n){var i;t.append("prizes[".concat(n,"][id]"),e.id||n+1),t.append("prizes[".concat(n,"][name]"),e.label),t.append("prizes[".concat(n,"][weight]"),null!==(i=e.weight)&&void 0!==i?i:0),t.append("prizes[".concat(n,"][backgroundColor]"),e.backgroundColor||"#FFFFFF"),t.append("prizes[".concat(n,"][display_option]"),e.display_option||"both"),e.iconFile&&t.append("icons[".concat(e.id||n+1,"]"),e.iconFile)})),Object.entries(c.value).forEach((function(e){var n=P(e,2),i=n[0],r=n[1];t.append("config[".concat(i,"]"),r)})),e.next=6,Nova.request().post("/nova-vendor/spin-wheel-tool/admin/save",t,{headers:{"Content-Type":"multipart/form-data"}});case 6:r.value="Cấu hình đã được lưu thành công!",setTimeout((function(){return r.value=""}),3e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Không thể lưu cấu hình:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=H(j().mark((function e(){var i,l,u,d,f,m,g;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a.value&&s.value){e.next=3;break}return e.abrupt("return");case 3:return a.value=!0,e.next=6,h();case 6:if(e.sent){e.next=12;break}return r.value="Bạn đã hết lượt quay.",a.value=!1,s.value=!1,e.abrupt("return");case 12:return e.next=14,Nova.request().post("/nova-vendor/spin-wheel-tool/spin");case 14:i=e.sent,l=i.data.prize_id,u=n.value.findIndex((function(e){return e.id===l})),t.value&&u>=0?(o.value=u,d=c.value.spinDuration,f=c.value.numberOfRevolutions,g=(m={cubicOut:function(e){return--e*e*e+1},linear:function(e){return e},quintOut:function(e){return 1+--e*e*e*e*e}})[c.value.easingFunction]||m.cubicOut,t.value.spinToItem(u,d,!1,f,1,g),t.value.onRest=function(){if(null!==o.value){var e=n.value[o.value];r.value="Kết quả: ".concat(e.label),a.value=!1,o.value=null,h()}}):(console.error("Không thể quay vì chỉ số không hợp lệ."),a.value=!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Không thể quay:",e.t0),a.value=!1;case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=H(j().mark((function e(){var i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t.value&&(i=n.value.map((function(e){return{label:"icon"===e.display_option?"":e.label,image:"text"===e.display_option?null:l.value[e.id]||null,weight:1,backgroundColor:e.backgroundColor||"#FFFFFF"}})),t.value.init({items:i,pointerAngle:135,isInteractive:!1}),t.value.onRest=function(){if(console.log("Vòng quay dừng lại"),null!==o.value){var e=n.value[o.value];r.value="Kết quả: ".concat(e.label),a.value=!1,o.value=null,h()}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.watch)(n,(function(){a.value||g()}),{deep:!0});var p=function(){var i=H(j().mark((function i(){var s;return j().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.value||t.value){i.next=6;break}return i.next=3,v();case 3:s=n.value.map((function(e){return{label:"icon"===e.display_option?"":e.label,weight:1,image:l.value[e.id]||null,backgroundColor:e.backgroundColor||"#FFFFFF"}})),t.value=new O(e.value,{items:s,pointerAngle:135,isInteractive:!1,overlayImage:u}),t.value.onRest=function(){if(null!==o.value){var e=n.value[o.value];r.value="Kết quả: ".concat(e.label),a.value=!1,o.value=null,h()}};case 6:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}(),v=function(){var e=H(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value.map((function(e){return new Promise((function(t){if(!e.icon||"icon"!==e.display_option&&"both"!==e.display_option)t();else{var n=new Image;n.src=e.icon,n.onload=function(){l.value[e.id]=n,t()},n.onerror=function(){return t()}}}))})),e.next=3,Promise.all(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{wheelContainer:e,centerIcon:"/images/an.svg?01aaf1949d91c74435d064dba5b7ace8",pointerIcon:"/images/kim.svg?b62a8816bddb2a67bed5bb98041ec8cc",bgImage:"/images/bg.png?e3c71cc9a5cad0a5368af58f920b6483",config:c,items:n,spin:m,isSpinning:a,canSpin:s,saveSettings:f,addItem:function(){var e=n.value.length>0?Math.max.apply(Math,z(n.value.map((function(e){return e.id}))))+1:1;n.value.push({id:e,label:"Giải Thưởng ".concat(n.value.length+1),weight:1,display_option:"both",icon:null,iconFile:null,backgroundColor:"#FFFFFF"})},removeItem:function(e){n.value.splice(e,1)},message:r,onIconChange:function(e,t){var i=e.target.files[0];if(i){n.value[t].iconFile=i;var r=new FileReader;r.onload=function(e){n.value[t].icon=e.target.result},r.readAsDataURL(i)}},initializeWheel:p,updateWheelItems:g}}};var U=n(72),Y=n.n(U),K=n(876),X={insert:"head",singleton:!1};Y()(K.A,X);K.A.locals;const Q=(0,n(262).A)(G,[["render",function(e,t,n,w,L,C){return(0,i.openBlock)(),(0,i.createElementBlock)("div",r,[(0,i.createElementVNode)("div",a,[(0,i.createElementVNode)("div",o,[(0,i.createElementVNode)("button",{class:"spin-button",onClick:t[0]||(t[0]=function(){return w.spin&&w.spin.apply(w,arguments)}),disabled:w.isSpinning||!w.canSpin},[(0,i.createElementVNode)("img",{src:w.centerIcon,alt:"Center Icon"},null,8,l)],8,s)],512)]),(0,i.createElementVNode)("div",u,[t[17]||(t[17]=(0,i.createElementVNode)("h2",null,"Cấu Hình Vòng Quay",-1)),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(w.items,(function(e,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{key:n},[(0,i.createElementVNode)("label",{onClick:function(t){return e.isOpen=!e.isOpen},class:"collapsible-label"},[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.label),1),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.isOpen?"[-]":"[+]"),1)],8,c),(0,i.withDirectives)((0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["collapsible-content",{open:e.isOpen}])},[(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"text","onUpdate:modelValue":function(t){return e.label=t},placeholder:"Giải Thưởng ".concat(n+1)},null,8,h),[[i.vModelText,e.label]]),t[8]||(t[8]=(0,i.createElementVNode)("label",null,"Tỷ Lệ Trúng (Trọng Số):",-1)),(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"number","onUpdate:modelValue":function(t){return e.weight=t},min:"0",placeholder:"Trọng Số"},null,8,d),[[i.vModelText,e.weight]]),t[9]||(t[9]=(0,i.createElementVNode)("label",null,"Icon Giải Thưởng:",-1)),(0,i.createElementVNode)("input",{type:"file",onChange:function(e){return w.onIconChange(e,n)},accept:"image/*"},null,40,f),e.icon?((0,i.openBlock)(),(0,i.createElementBlock)("div",m,[(0,i.createElementVNode)("img",{src:e.icon,alt:"Icon Preview"},null,8,g)])):(0,i.createCommentVNode)("",!0),t[10]||(t[10]=(0,i.createElementVNode)("label",null,"Mã Màu Nền:",-1)),(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"color","onUpdate:modelValue":function(t){return e.backgroundColor=t}},null,8,p),[[i.vModelText,e.backgroundColor]]),t[11]||(t[11]=(0,i.createElementVNode)("label",null,"Hiển Thị:",-1)),(0,i.withDirectives)((0,i.createElementVNode)("select",{"onUpdate:modelValue":function(t){return e.display_option=t}},t[7]||(t[7]=[(0,i.createElementVNode)("option",{value:"icon"},"Icon",-1),(0,i.createElementVNode)("option",{value:"text"},"Text",-1)]),8,v),[[i.vModelSelect,e.display_option]]),(0,i.createElementVNode)("button",{onClick:function(e){return w.removeItem(n)},class:"remove-button"},"Xóa",8,b)],2),[[i.vShow,e.isOpen]])])})),128)),(0,i.createElementVNode)("div",_,[t[13]||(t[13]=(0,i.createElementVNode)("label",null,"Thời Gian Quay (ms):",-1)),(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return w.config.spinDuration=e}),min:"1000",placeholder:"Thời Gian Quay"},null,512),[[i.vModelText,w.config.spinDuration]]),t[14]||(t[14]=(0,i.createElementVNode)("label",null,"Số Vòng Quay Trước Khi Dừng:",-1)),(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=function(e){return w.config.numberOfRevolutions=e}),min:"1",placeholder:"Số Vòng Quay"},null,512),[[i.vModelText,w.config.numberOfRevolutions]]),t[15]||(t[15]=(0,i.createElementVNode)("label",null,"Giá Trị Giảm Tốc (rotationResistance):",-1)),(0,i.withDirectives)((0,i.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return w.config.rotationResistance=e}),placeholder:"Giá Trị Giảm Tốc"},null,512),[[i.vModelText,w.config.rotationResistance]]),t[16]||(t[16]=(0,i.createElementVNode)("label",null,"Hàm Easing:",-1)),(0,i.withDirectives)((0,i.createElementVNode)("select",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return w.config.easingFunction=e})},t[12]||(t[12]=[(0,i.createElementVNode)("option",{value:"cubicOut"},"cubicOut",-1),(0,i.createElementVNode)("option",{value:"linear"},"linear",-1),(0,i.createElementVNode)("option",{value:"quintOut"},"quintOut",-1)]),512),[[i.vModelSelect,w.config.easingFunction]])]),(0,i.createElementVNode)("div",y,[w.message?((0,i.openBlock)(),(0,i.createElementBlock)("p",x,(0,i.toDisplayString)(w.message),1)):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("button",{onClick:t[5]||(t[5]=function(){return w.addItem&&w.addItem.apply(w,arguments)})},"Thêm Giải Thưởng Mới"),(0,i.createElementVNode)("button",{onClick:t[6]||(t[6]=function(){return w.saveSettings&&w.saveSettings.apply(w,arguments)})},"Lưu Cấu Hình")])])])}],["__scopeId","data-v-f5d984ca"]]);Nova.booting((function(e,t){Nova.inertia("SpinWheelTool",Q)}))},876:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(314),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".spin-wheel-settings[data-v-f5d984ca]{align-items:flex-start;color:#333;display:flex;font-family:Arial,sans-serif;padding:20px}.left-panel[data-v-f5d984ca]{align-items:center;display:flex;flex:1;flex-direction:column;margin-right:20px;position:relative}.wheel-container[data-v-f5d984ca]{height:350px;margin-bottom:20px;position:relative;top:100px;width:350px}.right-panel[data-v-f5d984ca]{background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,.1);flex:1;max-height:70vh;max-width:300px;overflow-y:auto;padding:20px}.prize-config[data-v-f5d984ca]{display:flex;flex-direction:column;margin-bottom:15px}.prize-config label[data-v-f5d984ca]{font-weight:700;margin-bottom:5px}.prize-config input[type=number][data-v-f5d984ca],.prize-config input[type=text][data-v-f5d984ca],.prize-config select[data-v-f5d984ca]{//background-color:#2a2a2a;//color:#fff;border:1px solid #007bff;border-radius:4px;margin-bottom:10px;padding:8px;width:100%}button[data-v-f5d984ca]{background-color:#007bff;border:none;border-radius:4px;color:#fff;cursor:pointer;margin-top:10px;padding:10px}.spin-button[data-v-f5d984ca]{background-color:transparent}.success-message[data-v-f5d984ca]{color:green;font-weight:700;margin-top:20px}.icon-preview img[data-v-f5d984ca]{max-height:100px;max-width:100px}.spin-button[data-v-f5d984ca]{border:none;border-radius:50%;color:#fff;cursor:pointer;left:50%;position:absolute;top:46%;transform:translate(-50%,-50%);z-index:2}.spin-button img[data-v-f5d984ca]{height:auto;transition:transform .3s ease;width:50px}.spin-button img[data-v-f5d984ca]:hover{transform:scale(1.04)}.pointer img[data-v-f5d984ca]{height:auto;transform:rotate(-15deg);width:30px}.left-panel[data-v-f5d984ca]{background-image:url(/images/bg.png);background-position:top;background-repeat:no-repeat;background-size:cover;height:600px}label[data-v-f5d984ca]{cursor:pointer}label span[data-v-f5d984ca]{font-weight:700;margin-left:5px}div.v-show[data-v-f5d984ca]{margin-top:10px}.collapsible-label[data-v-f5d984ca]{background-color:#f0f0f0;border-radius:4px;color:#333;cursor:pointer;display:flex;font-weight:700;justify-content:space-between;margin-top:10px;padding:10px;transition:background-color .3s ease}.collapsible-label[data-v-f5d984ca]:hover{background-color:#e0e0e0}.collapsible-content[data-v-f5d984ca]{background-color:#f9f9f9;border-radius:4px;margin-top:5px;max-height:0;overflow:hidden;padding:0 10px;transition:max-height .3s ease,padding .3s ease}.collapsible-content button[data-v-f5d984ca],.collapsible-content input[data-v-f5d984ca],.collapsible-content select[data-v-f5d984ca]{margin-top:8px;width:100%}.collapsible-content.open[data-v-f5d984ca]{max-height:500px;padding:10px}.icon-preview img[data-v-f5d984ca]{border-radius:4px;margin-top:8px;max-height:50px;max-width:50px}.remove-button[data-v-f5d984ca]{background-color:#ff4d4f;border:none;border-radius:4px;color:#fff;cursor:pointer;padding:8px;transition:background-color .3s ease}.remove-button[data-v-f5d984ca]:hover{background-color:#ff7875}.sticky-buttons[data-v-f5d984ca]{background-color:#f8f9fa;border-top:2px solid #ddd;bottom:-15px;left:0;padding:10px;position:sticky;text-align:center}.sticky-buttons button[data-v-f5d984ca]{margin:5px auto;width:calc(100% - 20px)}.config-section[data-v-f5d984ca]{padding-bottom:50px}",""]);const a=r},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},351:()=>{},72:(e,t,n)=>{var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],r=0;r<e.length;r++){var a=e[r],l=t.base?a[0]+t.base:a[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var h=s(c),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:c,updater:p(d,t),references:1}),i.push(c)}return i}function u(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t,n){var i=n.css,r=n.media,a=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var m=null,g=0;function p(e,t){var n,i,r;if(t.singleton){var a=g++;n=m||(m=u(t)),i=d.bind(null,n,a,!1),r=d.bind(null,n,a,!0)}else n=u(t),i=f.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=s(n[i]);o[r].references--}for(var a=l(e,t),u=0;u<n.length;u++){var c=s(n[u]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=a}}}},262:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,i]of t)n[e]=i;return n}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,exports:{}};return t[e](a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,n,r,a)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],s=!0,l=0;l<n.length;l++)(!1&a||o>=a)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(s=!1,a<o&&(o=a));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={416:0,757:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,s,l]=n,u=0;if(o.some((t=>0!==e[t]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(l)var c=l(i)}for(t&&t(n);u<o.length;u++)a=o[u],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(c)},n=self.webpackChunkdbiz_spin_wheel_tool=self.webpackChunkdbiz_spin_wheel_tool||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0,i.O(void 0,[757],(()=>i(455)));var r=i.O(void 0,[757],(()=>i(351)));r=i.O(r)})();